{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./groups.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./groups.component.css?ngResource\";\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\n//import { UserDataService } from 'src/app/service/user-data.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Group } from 'server/routes/groupModel';\nimport { ChangeDetectorRef } from '@angular/core';\nconst httpOptions = {\n  headers: new HttpHeaders({\n    'Content-Type': 'application/json'\n  })\n};\nconst BACKEND_URL = \"http://localhost:3000\";\nexport let GroupsComponent = class GroupsComponent {\n  constructor(http, router, cdr) {\n    this.http = http;\n    this.router = router;\n    this.cdr = cdr;\n    this.groups = [];\n    this.superGroups = [];\n    this.clickedGroups = [];\n    this.groupChannels = [];\n    this.isUniqueGroup = true;\n    this.isUser = true;\n    this.isAdmin = true;\n    this.isSuperAdmin = true;\n    this.noRequests = true;\n    this.numberOfRequests = 0;\n    this.numberOfAdminRequests = 0;\n    this.isButtonDisabled = false;\n    this.buttonDisabledStates = {};\n    this.group = new Group(0, \" \", \" \", [], [], [], [], {}, true);\n  }\n  ngOnInit() {\n    const storedUser = window.sessionStorage.getItem('current.user');\n    if (storedUser) {\n      this.loggedInUser = JSON.parse(storedUser);\n      console.log(this.loggedInUser.role);\n      this.profilePicPath = BACKEND_URL + \"/\" + this.loggedInUser.profilePic;\n    }\n    if (this.loggedInUser.role === 1) {\n      this.isUser = true;\n      this.isAdmin = false;\n      this.isSuperAdmin = false;\n    } else if (this.loggedInUser.role === 2) {\n      this.isUser = false;\n      this.isAdmin = true;\n      this.isSuperAdmin = false;\n    } else if (this.loggedInUser.role === 3) {\n      this.isUser = false;\n      this.isAdmin = false;\n      this.isSuperAdmin = true;\n    }\n    console.log(this.isSuperAdmin);\n    this.getGroups();\n    this.getUsers();\n    this.http.get(BACKEND_URL + \"/groups\").subscribe(groupsNames => {\n      this.allGroupNames = groupsNames;\n    });\n  }\n  onGroupCardClick(group) {\n    this.selectedGroup = group;\n    this.router.navigate(['/channels'], {\n      queryParams: {\n        yourKey: JSON.stringify(group)\n      }\n    });\n  }\n  requestButton(group) {\n    //console.log(this.loggedInUser.username)\n    group.userRequests.push(this.loggedInUser.username);\n    this.clickedGroups.push(group.groupName);\n    //console.log(group)\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n    this.buttonDisabledStates[group.groupID] = true;\n  }\n  isGroupClicked(groupName) {\n    return this.clickedGroups.includes(groupName);\n  }\n  editGroupUsers(group) {\n    this.selectedGroup = group;\n    console.log(group);\n    console.log(this.users);\n    console.log(this.groups);\n    this.userNotinGroup;\n    this.usersInGroup;\n    // Get all usernames\n    // Filter usernames that are in group.members\n    this.usersInGroup = this.usernames.filter(username => group.members.includes(username));\n    // Filter usernames that are not in group.members\n    this.userNotinGroup = this.usernames.filter(username => !group.members.includes(username));\n    $('#editGroupUsers').modal('show');\n  }\n  addUserFromGroup(group, username) {\n    console.log(\"add \" + username + \" from\" + group);\n    console.log(group);\n    group.members.push(username);\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n      this.getUsers();\n      this.editGroupUsers(group);\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  removeUserFromGroup(group, username) {\n    const index = group.members.indexOf(username);\n    group.members.splice(index, 1);\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n      this.getUsers();\n      this.editGroupUsers(group);\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  onAddGroup() {\n    console.log(\"Add Group button clicked\");\n    $('#addGroupModal').modal('show');\n  }\n  onGroupInput() {\n    this.isUniqueGroup = !this.allGroupNames.includes(this.newGroupName);\n    console.log(this.isUniqueGroup);\n  }\n  addChannel() {\n    if (this.newChannelName && !this.groupChannels.includes(this.newChannelName)) {\n      this.groupChannels.push(this.newChannelName);\n      this.newChannelName = '';\n    }\n  }\n  leaveGroup(group) {\n    console.log(group);\n    console.log(this.loggedInUser.username);\n    // Remove user from group.members\n    group.members = group.members.filter(member => member !== this.loggedInUser.username);\n    // Loop through each channel in group.channels and remove the user\n    for (const channelName in group.channels) {\n      group.channels[channelName] = group.channels[channelName].filter(member => member !== this.loggedInUser.username);\n    }\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  saveGroup() {\n    console.log(this.newGroupName);\n    console.log(this.groupChannels);\n    this.GetNewGroupID();\n    console.log(this.newGroupID);\n    let channelsObject = {};\n    this.groupChannels.forEach(channel => {\n      channelsObject[channel] = [];\n    });\n    if (this.isUniqueGroup === true) {\n      this.group.groupID = this.newGroupID;\n      this.group.groupName = this.newGroupName;\n      this.group.createdBy = this.loggedInUser.username;\n      this.group.groupAdmins = [this.loggedInUser.username];\n      this.group.userRequests = [];\n      this.group.members = [this.loggedInUser.username];\n      this.group.channels = channelsObject;\n      this.group.valid = true;\n      console.log(this.group);\n      this.http.post(BACKEND_URL + \"/update-groups\", this.group).subscribe(response => {\n        console.log('User details updated on the server.', response);\n        //refesh User list \n        this.getGroups();\n        this.cdr.detectChanges();\n      }, error => {\n        console.error('There was an error updating the user details on the server.', error);\n        alert('Error updating profile. Please try again.');\n      });\n      this.closeModal(\"newGroup\");\n    } else {\n      alert(\"Group already exists\");\n    }\n    //location.reload();\n  }\n\n  closeModal(modalType) {\n    if (modalType == \"newGroup\") {\n      this.group = {\n        groupID: 0,\n        groupName: \"\",\n        createdBy: this.loggedInUser.username,\n        adminRequests: [],\n        groupAdmins: [],\n        userRequests: [],\n        members: [],\n        channels: {},\n        valid: true\n      };\n      this.newGroupName = '';\n      this.groupChannels = [];\n      //console.log(this.group)\n      $('#addGroupModal').modal('hide');\n    }\n    if (modalType == \"requestApproval\") {\n      $('#approveRequests').modal('hide');\n    }\n    if (modalType == \"requestAdminApproval\") {\n      $('#approveAdminRequests').modal('hide');\n    }\n    if (modalType == \"editUsers\") {\n      $('#editGroupUsers').modal('hide');\n    }\n  }\n  getUsers() {\n    this.http.get(BACKEND_URL + \"/all-users\", httpOptions).subscribe(data => {\n      if (data) {\n        this.users = data;\n        //console.log(this.users)\n        this.usernames = this.users.filter(u => u.valid).map(u => u.username);\n        //console.log(this.usernames);\n      } else {\n        alert(\"no Data Soz\");\n      }\n    }, error => {\n      console.error('There was an error:', error);\n    });\n  }\n  getGroups() {\n    this.http.get(BACKEND_URL + \"/all-groups\", httpOptions).subscribe(data => {\n      if (data) {\n        // All groups that are valid\n        this.superGroups = data.filter(group => group.valid === true);\n        const quarterLength = Math.ceil(this.superGroups.length / 4);\n        this.firstQuarterGroups = this.superGroups.slice(0, quarterLength);\n        this.secondQuarterGroups = this.superGroups.slice(quarterLength, quarterLength * 2);\n        this.thirdQuarterGroups = this.superGroups.slice(quarterLength * 2, quarterLength * 3);\n        this.fourthQuarterGroups = this.superGroups.slice(quarterLength * 3);\n        // Rest of your code remains unchanged...\n        this.groups = this.superGroups;\n        this.numberOfAdminRequests = this.groups.filter(group => group.adminRequests && group.adminRequests.length > 0).length;\n        if (this.loggedInUser.role === 3) {\n          this.numberOfRequests = this.groups.filter(group => group.userRequests && group.userRequests.length > 0).length;\n        } else if (this.loggedInUser.role === 2) {\n          this.numberOfRequests = this.groups.filter(group => group.groupAdmins.includes(this.loggedInUser.username) && group.userRequests && group.userRequests.length > 0).length;\n        }\n        // Groups created by loggedInUser\n        this.myGroups = this.groups.filter(group => group.createdBy === this.loggedInUser.username || group.groupAdmins.includes(this.loggedInUser.username));\n        // Groups that loggedInUser is a member of but not created by them\n        this.joinedGroups = this.groups.filter(group => group.members.includes(this.loggedInUser.username) && group.createdBy !== this.loggedInUser.username && !group.groupAdmins.includes(this.loggedInUser.username));\n        // Groups that loggedInUser has neither created nor joined\n        this.otherGroups = this.groups.filter(group => group.createdBy !== this.loggedInUser.username && !group.members.includes(this.loggedInUser.username));\n      } else {\n        alert(\"no Data Soz\");\n      }\n    }, error => {\n      console.error('There was an error:', error);\n    });\n  }\n  GetNewGroupID() {\n    if (this.groups && this.groups.length > 0) {\n      this.newGroupID = this.groups[this.groups.length - 1].groupID + 1;\n    } else {\n      this.newGroupID = 1;\n    }\n  }\n  showRequests() {\n    this.getGroups();\n    // this.getRequests()\n    $('#approveRequests').modal('show');\n    if (this.groups.length > 0) {\n      //this.noRequests=false\n      this.groupsNeedApproval = this.groups.filter(group => group.userRequests && group.userRequests.length > 0);\n    }\n  }\n  requestAdminButton(group) {\n    console.log(this.loggedInUser.username);\n    group.adminRequests.push(this.loggedInUser.username);\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n    this.buttonDisabledStates[group.groupID] = true;\n  }\n  deleteGroup(group) {\n    console.log(group);\n    group.valid = false;\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  showAdminRequests() {\n    this.getGroups();\n    $('#approveAdminRequests').modal('show');\n    console.log(this.groups);\n    if (this.groups.length > 0) {\n      //this.noRequests=false\n      this.groupsAdminNeedApproval = this.groups.filter(group => group.adminRequests && group.adminRequests.length > 0);\n    }\n  }\n  approveRequest(group, userRequest) {\n    console.log(group);\n    console.log(userRequest);\n    if (group.userRequests.includes(userRequest)) {\n      group.members.push(userRequest);\n      group.userRequests.splice(group.userRequests.indexOf(userRequest), 1);\n    }\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  approveAdminRequest(group, adminRequest) {\n    console.log(group);\n    console.log(adminRequest);\n    if (group.adminRequests.includes(adminRequest)) {\n      group.groupAdmins.push(adminRequest);\n      group.adminRequests.splice(group.adminRequests.indexOf(adminRequest), 1);\n    }\n    console.log(group);\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  static #_ = this.ctorParameters = () => [{\n    type: HttpClient\n  }, {\n    type: Router\n  }, {\n    type: ChangeDetectorRef\n  }];\n};\nGroupsComponent = __decorate([Component({\n  selector: 'app-groups',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], GroupsComponent);","map":{"version":3,"names":["Component","Router","HttpClient","HttpHeaders","Group","ChangeDetectorRef","httpOptions","headers","BACKEND_URL","GroupsComponent","constructor","http","router","cdr","groups","superGroups","clickedGroups","groupChannels","isUniqueGroup","isUser","isAdmin","isSuperAdmin","noRequests","numberOfRequests","numberOfAdminRequests","isButtonDisabled","buttonDisabledStates","group","ngOnInit","storedUser","window","sessionStorage","getItem","loggedInUser","JSON","parse","console","log","role","profilePicPath","profilePic","getGroups","getUsers","get","subscribe","groupsNames","allGroupNames","onGroupCardClick","selectedGroup","navigate","queryParams","yourKey","stringify","requestButton","userRequests","push","username","groupName","post","response","error","alert","groupID","isGroupClicked","includes","editGroupUsers","users","userNotinGroup","usersInGroup","usernames","filter","members","$","modal","addUserFromGroup","removeUserFromGroup","index","indexOf","splice","onAddGroup","onGroupInput","newGroupName","addChannel","newChannelName","leaveGroup","member","channelName","channels","saveGroup","GetNewGroupID","newGroupID","channelsObject","forEach","channel","createdBy","groupAdmins","valid","detectChanges","closeModal","modalType","adminRequests","data","u","map","quarterLength","Math","ceil","length","firstQuarterGroups","slice","secondQuarterGroups","thirdQuarterGroups","fourthQuarterGroups","myGroups","joinedGroups","otherGroups","showRequests","groupsNeedApproval","requestAdminButton","deleteGroup","showAdminRequests","groupsAdminNeedApproval","approveRequest","userRequest","approveAdminRequest","adminRequest","_","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sources":["/Users/frazerlinscott/Desktop/Software Frameworks/Assignments/Assignment1_SoftwareFrames_s2930588/src/app/groups/groups.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n//import { UserDataService } from 'src/app/service/user-data.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Group } from 'server/routes/groupModel';\n\nimport { ChangeDetectorRef } from '@angular/core';\n\ndeclare var $: any;\n\nconst httpOptions = {\n  headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n};\n\nconst BACKEND_URL = \"http://localhost:3000\";\n\n@Component({\n  selector: 'app-groups',\n  templateUrl: './groups.component.html',\n  styleUrls: ['./groups.component.css']\n})\nexport class GroupsComponent implements OnInit {\n\n  loggedInUser : any;\n  users: any;\n  groups: any[] = [];\n  allGroups: any;\n  superGroups: any[] = [];\n\n  clickedGroups: any[] = [];\n\n\n  groupsNeedApproval: any;\n  groupsAdminNeedApproval:any;\n\n  selectedGroup: any;\n\n  newGroupName: any;\n  newChannelName: any;\n  groupChannels: string[] = [];\n\n  newGroupID: any;\n  allGroupNames: any;\n  isUniqueGroup:boolean = true;\n\n  isUser: boolean = true;\n  isAdmin: boolean = true;\n  isSuperAdmin: boolean = true;\n\n  noRequests: boolean = true;\n\n  numberOfRequests: number = 0;\n  numberOfAdminRequests: number = 0;\n\n  isButtonDisabled: boolean = false;\n  buttonDisabledStates: { [groupId: string]: boolean } = {};\n\n  myGroups: any;\n  joinedGroups: any;\n  otherGroups: any;\n\n  userNotinGroup: any;\n  usersInGroup: any;\n\n  usernames: any;\n  firstQuarterGroups: any;\n  secondQuarterGroups: any;\n  thirdQuarterGroups: any;\n  fourthQuarterGroups: any;\n  profilePicPath: any;\n\n  group: Group = new Group(0, \" \", \" \",[], [], [], [], {}, true);\n\n  constructor(private http: HttpClient, private router: Router, private cdr: ChangeDetectorRef) { }\n\n  ngOnInit(): void {\n\n    const storedUser = window.sessionStorage.getItem('current.user');\n    if (storedUser) {\n\n      this.loggedInUser = JSON.parse(storedUser);\n      console.log(this.loggedInUser.role)\n      this.profilePicPath=BACKEND_URL + \"/\" + this.loggedInUser.profilePic\n    }\n\n\n  if (this.loggedInUser.role === 1){\n    this.isUser = true\n    this.isAdmin = false\n    this.isSuperAdmin = false\n  }else if (this.loggedInUser.role === 2){\n    this.isUser = false\n    this.isAdmin = true\n    this.isSuperAdmin = false\n  }else if (this.loggedInUser.role === 3){\n    this.isUser = false\n    this.isAdmin = false\n    this.isSuperAdmin = true\n  }\n\n  console.log(this.isSuperAdmin)\n\n    \n    this.getGroups()\n    this.getUsers()\n\n\n\n    this.http.get<string[]>(BACKEND_URL + \"/groups\").subscribe(groupsNames => {\n      this.allGroupNames = groupsNames;\n\n    });\n  }\n\n  onGroupCardClick(group:any ){\n    this.selectedGroup = group;\n\n    this.router.navigate(['/channels'], { queryParams: { yourKey: JSON.stringify(group) }})\n  }\n\n  requestButton(group:any){\n    \n    //console.log(this.loggedInUser.username)\n\n    group.userRequests.push(this.loggedInUser.username);\n    this.clickedGroups.push(group.groupName);\n\n    //console.log(group)\n\n    this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n      response => {\n          console.log('User details updated on the server.', response);\n\n          //refesh User list \n          this.getGroups();\n      },\n      error => {\n          console.error('There was an error updating the user details on the server.', error);\n          alert('Error updating profile. Please try again.');\n      }\n    )\n    this.buttonDisabledStates[group.groupID] = true;\n  }\n\n  isGroupClicked(groupName: string): boolean {\n    return this.clickedGroups.includes(groupName);\n}\n\n\n\n  editGroupUsers(group:any){\n    this.selectedGroup = group;\n    console.log(group)\n    console.log(this.users)\n    console.log(this.groups)\n\n    this.userNotinGroup\n    this.usersInGroup\n    // Get all usernames\n    // Filter usernames that are in group.members\n    this.usersInGroup = this.usernames.filter((username: any) => group.members.includes(username));\n    // Filter usernames that are not in group.members\n    this.userNotinGroup = this.usernames.filter((username: any) => !group.members.includes(username));\n    $('#editGroupUsers').modal('show');\n  }\n\n  addUserFromGroup(group:any, username:any){\n    console.log(\"add \" + username + \" from\" + group)\n    console.log(group)\n\n    group.members.push(username);\n\n    this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n      response => {\n          console.log('User details updated on the server.', response);\n\n          //refesh User list \n          this.getGroups();\n          this.getUsers();\n          this.editGroupUsers(group)\n      },\n      error => {\n          console.error('There was an error updating the user details on the server.', error);\n          alert('Error updating profile. Please try again.');\n      }\n    )\n  }\n\n  removeUserFromGroup(group:any, username:any){\n    const index = group.members.indexOf(username);\n    group.members.splice(index, 1)\n\n    this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n      response => {\n          console.log('User details updated on the server.', response);\n\n          //refesh User list \n          this.getGroups();\n          this.getUsers();\n          this.editGroupUsers(group)\n      },\n      error => {\n          console.error('There was an error updating the user details on the server.', error);\n          alert('Error updating profile. Please try again.');\n      }\n    )\n  }\n\n  onAddGroup() {\n    console.log(\"Add Group button clicked\");\n    $('#addGroupModal').modal('show');\n  }\n\n  onGroupInput() {\n    this.isUniqueGroup = !this.allGroupNames.includes(this.newGroupName);\n    console.log(this.isUniqueGroup)\n  }\n\n  addChannel() {\n    if (this.newChannelName && !this.groupChannels.includes(this.newChannelName)) {\n      this.groupChannels.push(this.newChannelName);\n      this.newChannelName = '';\n    }\n  }\n\n  leaveGroup(group:any){\n    console.log(group)\n    console.log(this.loggedInUser.username)\n  \n      // Remove user from group.members\n      group.members = group.members.filter((member: any) => member !== this.loggedInUser.username);\n  \n      // Loop through each channel in group.channels and remove the user\n      for (const channelName in group.channels) {\n          group.channels[channelName] = group.channels[channelName].filter((member: any) => member !== this.loggedInUser.username);\n      }\n      this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n        response => {\n  \n            //refesh User list \n            this.getGroups();\n        },\n        error => {\n            console.error('There was an error updating the user details on the server.', error);\n            alert('Error updating profile. Please try again.');\n        }\n      )\n  }\n\n  saveGroup(){\n    console.log(this.newGroupName)\n    console.log(this.groupChannels)\n\n    this.GetNewGroupID()\n\n    console.log(this.newGroupID)\n\n    let channelsObject: { [channelName: string]: string[] } = {};\n      this.groupChannels.forEach(channel => {\n        channelsObject[channel] = [];\n      });\n\n    if (this.isUniqueGroup === true){\n      this.group.groupID = this.newGroupID;\n      this.group.groupName = this.newGroupName;\n      this.group.createdBy = this.loggedInUser.username;\n      this.group.groupAdmins = [this.loggedInUser.username];\n      this.group.userRequests = [];\n      this.group.members = [this.loggedInUser.username];\n      this.group.channels = channelsObject;\n      this.group.valid = true;\n  \n      console.log(this.group)\n  \n      this.http.post(BACKEND_URL+\"/update-groups\", this.group).subscribe(\n        response => {\n            console.log('User details updated on the server.', response);\n  \n            //refesh User list \n            this.getGroups();\n            this.cdr.detectChanges();\n        },\n        error => {\n            console.error('There was an error updating the user details on the server.', error);\n            alert('Error updating profile. Please try again.');\n        }\n      )\n      this.closeModal(\"newGroup\")\n    }else{\n      alert(\"Group already exists\");\n    }\n    //location.reload();\n  }\n\n  closeModal(modalType: string | undefined){\n\n    if(modalType == \"newGroup\"){\n\n      this.group = {\n        groupID: 0,\n        groupName: \"\",\n        createdBy: this.loggedInUser.username,\n        adminRequests:[],\n        groupAdmins: [],\n        userRequests: [],\n        members: [],\n        channels: {},\n        valid: true\n    };\n  \n    this.newGroupName=''\n  \n    this.groupChannels=[]\n  \n    //console.log(this.group)\n      $('#addGroupModal').modal('hide');\n    }\n\n    if(modalType == \"requestApproval\"){\n      $('#approveRequests').modal('hide');\n    } \n\n    if(modalType == \"requestAdminApproval\"){\n      $('#approveAdminRequests').modal('hide');\n    } \n\n    if(modalType == \"editUsers\"){\n      $('#editGroupUsers').modal('hide');\n    } \n\n  }\n\n  getUsers(){\n    this.http.get(BACKEND_URL + \"/all-users\", httpOptions)\n    .subscribe(\n        (data: any) => {\n            if (data) {\n              this.users = data\n              //console.log(this.users)\n              this.usernames = this.users.filter((u: { valid: any; }) => u.valid).map((u: { username: any; }) => u.username);\n              //console.log(this.usernames);\n\n            } else {\n                alert(\"no Data Soz\");\n            }\n        },\n        error => {console.error('There was an error:', error);}\n    );\n  }\n\n  getGroups() {\n    this.http.get(BACKEND_URL + \"/all-groups\", httpOptions)\n    .subscribe(\n        (data: any) => {\n            if (data) {\n                // All groups that are valid\n                this.superGroups = data.filter((group: { valid: boolean; }) => group.valid === true);\n\n                const quarterLength = Math.ceil(this.superGroups.length / 4);\n  \n                this.firstQuarterGroups = this.superGroups.slice(0, quarterLength);\n                this.secondQuarterGroups = this.superGroups.slice(quarterLength, quarterLength * 2);\n                this.thirdQuarterGroups = this.superGroups.slice(quarterLength * 2, quarterLength * 3);\n                this.fourthQuarterGroups = this.superGroups.slice(quarterLength * 3);\n\n                // Rest of your code remains unchanged...\n                this.groups = this.superGroups;\n  \n                this.numberOfAdminRequests= this.groups.filter((group: { adminRequests: string | any[]; }) => group.adminRequests && group.adminRequests.length > 0).length\n\n                if (this.loggedInUser.role === 3){\n                  this.numberOfRequests = this.groups.filter((group: { userRequests: string | any[]; }) => group.userRequests && group.userRequests.length > 0).length\n                } else if(this.loggedInUser.role === 2){\n                  this.numberOfRequests = this.groups.filter((group: { userRequests: string | any[]; groupAdmins: any[]; }) => \n                  group.groupAdmins.includes(this.loggedInUser.username) && \n                  group.userRequests && \n                  group.userRequests.length > 0).length;\n                }\n\n\n                // Groups created by loggedInUser\n                this.myGroups = this.groups.filter((group: { createdBy: any; groupAdmins: any; }) => \n                    group.createdBy === this.loggedInUser.username || group.groupAdmins.includes(this.loggedInUser.username));\n\n                // Groups that loggedInUser is a member of but not created by them\n                this.joinedGroups = this.groups.filter((group: { members: string | any[]; createdBy: any; groupAdmins: any; }) => \n                    group.members.includes(this.loggedInUser.username) && group.createdBy !== this.loggedInUser.username && !group.groupAdmins.includes(this.loggedInUser.username));\n\n                // Groups that loggedInUser has neither created nor joined\n                this.otherGroups = this.groups.filter((group: { createdBy: any; members: string | any[]; }) => \n                    group.createdBy !== this.loggedInUser.username && !group.members.includes(this.loggedInUser.username));\n            } else {\n                alert(\"no Data Soz\");\n            }\n        },\n        error => {\n            console.error('There was an error:', error);\n        }\n    );\n}\n\n\n  GetNewGroupID(){\n    if (this.groups && this.groups.length > 0) {\n      this.newGroupID = this.groups[this.groups.length - 1].groupID + 1;\n  } else {\n      this.newGroupID = 1;\n  }\n  }\n\n  showRequests(){\n    this.getGroups();  \n    // this.getRequests()\n\n    $('#approveRequests').modal('show');\n\n    if(this.groups.length > 0){\n      //this.noRequests=false\n      this.groupsNeedApproval = this.groups.filter((group: { userRequests: string | any[]; }) => group.userRequests && group.userRequests.length > 0);\n    }\n  }\n\n  requestAdminButton(group:any){\n        \n        console.log(this.loggedInUser.username)\n\n        group.adminRequests.push(this.loggedInUser.username);\n        this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n          response => {\n              console.log('User details updated on the server.', response);\n\n              //refesh User list \n              this.getGroups();\n          },\n          error => {\n              console.error('There was an error updating the user details on the server.', error);\n              alert('Error updating profile. Please try again.');\n          }\n        )\n        this.buttonDisabledStates[group.groupID] = true;\n  }\n\n  deleteGroup(group:any){\n\n    console.log(group)\n\n    group.valid = false\n\n    this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n      response => {\n          console.log('User details updated on the server.', response);\n\n          //refesh User list \n          this.getGroups();\n      },\n      error => {\n          console.error('There was an error updating the user details on the server.', error);\n          alert('Error updating profile. Please try again.');\n      }\n    )\n  }\n\n  showAdminRequests(){\n    this.getGroups();  \n\n    $('#approveAdminRequests').modal('show');\n\n    console.log(this.groups)\n\n    if(this.groups.length > 0){\n      //this.noRequests=false\n      this.groupsAdminNeedApproval = this.groups.filter((group: { adminRequests: string | any[]; }) => group.adminRequests && group.adminRequests.length > 0);\n          }\n  }\n\n\n\n  approveRequest(group: any, userRequest: string){\n    console.log(group);\n    console.log(userRequest);\n\n    if (group.userRequests.includes(userRequest)) {\n      group.members.push(userRequest);\n      group.userRequests.splice(group.userRequests.indexOf(userRequest), 1);\n  }\n\n  this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n    response => {\n        console.log('User details updated on the server.', response);\n\n        //refesh User list \n        this.getGroups();\n    },\n    error => {\n        console.error('There was an error updating the user details on the server.', error);\n        alert('Error updating profile. Please try again.');\n    }\n  )\n\n  }\n\n  approveAdminRequest(group: any, adminRequest: string){\n  console.log(group);\n  console.log(adminRequest);\n\n  if (group.adminRequests.includes(adminRequest)) {\n    group.groupAdmins.push(adminRequest);\n    group.adminRequests.splice(group.adminRequests.indexOf(adminRequest), 1);\n  }\n  console.log(group);\n\n  this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n    response => {\n        console.log('User details updated on the server.', response);\n\n        //refesh User list \n        this.getGroups();\n    },\n    error => {\n        console.error('There was an error updating the user details on the server.', error);\n        alert('Error updating profile. Please try again.');\n    }\n  )\n  }\n\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}