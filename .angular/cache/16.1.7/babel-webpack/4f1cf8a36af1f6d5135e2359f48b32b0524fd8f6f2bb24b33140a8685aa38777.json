{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\n//import { UserDataService } from 'src/app/service/user-data.service';\nimport { HttpHeaders } from '@angular/common/http';\nimport { Group } from 'server/routes/groupModel';\nconst httpOptions = {\n  headers: new HttpHeaders({\n    'Content-Type': 'application/json'\n  })\n};\nconst BACKEND_URL = \"http://localhost:3000\";\nexport let GroupsComponent = class GroupsComponent {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.groupChannels = [];\n    this.isUniqueGroup = true;\n    this.isUser = true;\n    this.isAdmin = true;\n    this.isSuperAdmin = true;\n    this.noRequests = true;\n    this.numberOfRequests = 0;\n    this.numberOfAdminRequests = 0;\n    this.isButtonDisabled = false;\n    this.buttonDisabledStates = {};\n    this.group = new Group(0, \" \", \" \", [], [], [], [], {}, true);\n  }\n  ngOnInit() {\n    const storedUser = window.sessionStorage.getItem('current.user');\n    if (storedUser) {\n      this.loggedInUser = JSON.parse(storedUser);\n      console.log(this.loggedInUser.username);\n    }\n    if (this.loggedInUser.role === 1) {\n      this.isUser = true;\n      this.isAdmin = false;\n      this.isSuperAdmin = false;\n    } else if (this.loggedInUser.role === 2) {\n      this.isUser = false;\n      this.isAdmin = true;\n      this.isSuperAdmin = false;\n    } else if (this.loggedInUser.role === 3) {\n      this.isUser = false;\n      this.isAdmin = false;\n      this.isSuperAdmin = true;\n    }\n    this.getGroups();\n    this.getUsers();\n    this.http.get(BACKEND_URL + \"/groups\").subscribe(groupsNames => {\n      this.allGroupNames = groupsNames;\n    });\n  }\n  onGroupCardClick(group) {\n    this.selectedGroup = group;\n    console.log(\"card clicked\");\n    //.log(group)\n    //this.router.navigate(['/channels', group]);\n    this.router.navigate(['/channels'], {\n      queryParams: {\n        yourKey: JSON.stringify(group)\n      }\n    });\n  }\n  requestButton(group) {\n    console.log(this.loggedInUser.username);\n    group.userRequests.push(this.loggedInUser.username);\n    console.log(group);\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n    this.buttonDisabledStates[group.groupID] = true;\n  }\n  editGroupUsers(group) {\n    this.selectedGroup = group;\n    console.log(group);\n    console.log(this.users);\n    console.log(this.groups);\n    this.userNotinGroup;\n    this.usersInGroup;\n    // Get all usernames\n    // Filter usernames that are in group.members\n    this.usersInGroup = this.usernames.filter(username => group.members.includes(username));\n    // Filter usernames that are not in group.members\n    this.userNotinGroup = this.usernames.filter(username => !group.members.includes(username));\n    $('#editGroupUsers').modal('show');\n  }\n  addUserFromGroup(group, username) {\n    console.log(\"add \" + username + \" from\" + group);\n    console.log(group);\n    group.members.push(username);\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n      this.getUsers();\n      this.editGroupUsers(group);\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  removeUserFromGroup(group, username) {\n    const index = group.members.indexOf(username);\n    group.members.splice(index, 1);\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n      this.getUsers();\n      this.editGroupUsers(group);\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  onAddGroup() {\n    console.log(\"Add Group button clicked\");\n    $('#addGroupModal').modal('show');\n  }\n  onGroupInput() {\n    this.isUniqueGroup = !this.allGroupNames.includes(this.newGroupName);\n    console.log(this.isUniqueGroup);\n  }\n  addChannel() {\n    if (this.newChannelName && !this.groupChannels.includes(this.newChannelName)) {\n      this.groupChannels.push(this.newChannelName);\n      this.newChannelName = '';\n    }\n  }\n  leaveGroup(group) {\n    console.log(group);\n    console.log(this.loggedInUser.username);\n    // Remove user from group.members\n    group.members = group.members.filter(member => member !== this.loggedInUser.username);\n    // Loop through each channel in group.channels and remove the user\n    for (const channelName in group.channels) {\n      group.channels[channelName] = group.channels[channelName].filter(member => member !== this.loggedInUser.username);\n    }\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  saveGroup() {\n    //console.log(this.newGroupName)\n    // console.log(this.groupChannels)\n    this.GetNewGroupID();\n    //console.log(this.newGroupID)\n    let channelsObject = {};\n    this.groupChannels.forEach(channel => {\n      channelsObject[channel] = [];\n    });\n    if (this.isUniqueGroup === true) {\n      this.group.groupID = this.newGroupID;\n      this.group.groupName = this.newGroupName;\n      this.group.createdBy = this.loggedInUser.username;\n      this.group.groupAdmins = [this.loggedInUser.username];\n      this.group.userRequests = [];\n      this.group.members = [this.loggedInUser.username];\n      this.group.channels = channelsObject;\n      this.group.valid = true;\n      //console.log(this.group)\n      this.http.post(BACKEND_URL + \"/update-groups\", this.group).subscribe(response => {\n        console.log('User details updated on the server.', response);\n        //refesh User list \n        this.getGroups();\n      }, error => {\n        console.error('There was an error updating the user details on the server.', error);\n        alert('Error updating profile. Please try again.');\n      });\n      this.closeModal(\"newGroup\");\n    } else {\n      alert(\"Group already exists\");\n    }\n  }\n  closeModal(modalType) {\n    if (modalType == \"newGroup\") {\n      this.group = {\n        groupID: 0,\n        groupName: \"\",\n        createdBy: this.loggedInUser.username,\n        adminRequests: [],\n        groupAdmins: [],\n        userRequests: [],\n        members: [],\n        channels: {},\n        valid: true\n      };\n      this.newGroupName = '';\n      this.groupChannels = [];\n      //console.log(this.group)\n      $('#addGroupModal').modal('hide');\n    }\n    if (modalType == \"requestApproval\") {\n      $('#approveRequests').modal('hide');\n    }\n    if (modalType == \"requestAdminApproval\") {\n      $('#approveAdminRequests').modal('hide');\n    }\n    if (modalType == \"editUsers\") {\n      $('#editGroupUsers').modal('hide');\n    }\n  }\n  getUsers() {\n    this.http.post(BACKEND_URL + \"/all-users\", httpOptions).subscribe(data => {\n      if (data) {\n        this.users = data;\n        //console.log(this.users)\n        this.usernames = this.users.filter(u => u.valid).map(u => u.username);\n        console.log(this.usernames);\n      } else {\n        alert(\"no Data Soz\");\n      }\n    }, error => {\n      console.error('There was an error:', error);\n    });\n  }\n  getGroups() {\n    this.http.post(BACKEND_URL + \"/all-groups\", httpOptions).subscribe(data => {\n      if (data) {\n        this.groups = data.filter(group => group.valid === true);\n        // Groups created by loggedInUser\n        this.myGroups = this.groups.filter(group => group.createdBy === this.loggedInUser.username || group.groupAdmins.includes(this.loggedInUser.username));\n        // Groups that loggedInUser is a member of but not created by them\n        this.joinedGroups = this.groups.filter(group => group.members.includes(this.loggedInUser.username) && group.createdBy !== this.loggedInUser.username && !group.groupAdmins.includes(this.loggedInUser.username));\n        // Groups that loggedInUser has neither created nor joined\n        this.otherGroups = this.groups.filter(group => group.createdBy !== this.loggedInUser.username && !group.members.includes(this.loggedInUser.username));\n        // console.log(this.loggedInUser)\n        // console.log(this.myGroups)\n        // console.log(this.otherGroups)\n        //if groupAdmin role filter requests to administered groups -- if superAdmin show all requests\n        if (this.loggedInUser.role == 2) {\n          this.groupsNeedApproval = this.groups.filter(group => group.userRequests && group.userRequests.length > 0 && group.groupAdmins.includes(this.loggedInUser.username));\n          this.numberOfRequests = this.groupsNeedApproval.length;\n        } else if (this.loggedInUser.role == 3) {\n          this.groupsNeedApproval = this.groups.filter(group => group.userRequests && group.userRequests.length > 0);\n          this.numberOfRequests = this.groupsNeedApproval.length;\n          this.groupsAdminNeedApproval = this.groups.filter(group => group.adminRequests && group.adminRequests.length > 0);\n          this.numberOfAdminRequests = this.groupsAdminNeedApproval.length;\n        }\n        //console.log(this.numberOfRequests)\n        //this.allGroups = data\n        //console.log(this.groups)\n        //console.log(typeof(this.groups))\n      } else {\n        alert(\"no Data Soz\");\n      }\n    }, error => {\n      console.error('There was an error:', error);\n    });\n  }\n  GetNewGroupID() {\n    if (this.groups && this.groups.length > 0) {\n      this.newGroupID = this.groups[this.groups.length - 1].groupID + 1;\n    } else {\n      this.newGroupID = 1;\n    }\n  }\n  showRequests() {\n    this.getGroups(); // Assuming this method populates the 'this.groups' array\n    // this.getRequests()\n    $('#approveRequests').modal('show');\n    if (this.groups.length > 0) {\n      //this.noRequests=false\n      this.groupsNeedApproval = this.groups.filter(group => group.userRequests && group.userRequests.length > 0);\n    }\n  }\n  requestAdminButton(group) {\n    //console.log(this.loggedInUser.username)\n    group.adminRequests.push(this.loggedInUser.username);\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n    this.buttonDisabledStates[group.groupID] = true;\n  }\n  deleteGroup(group) {\n    console.log(group);\n    group.valid = false;\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n  showAdminRequests() {\n    this.getGroups(); // Assuming this method populates the 'this.groups' array\n    // this.getRequests()\n    $('#approveAdminRequests').modal('show');\n    console.log(this.groups);\n    // if(this.groups.length > 0){\n    //   //this.noRequests=false\n    //   this.groupsAdminNeedApproval = this.groups.filter((group: { adminRequests: string | any[]; }) => group.adminRequests && group.adminRequests.length > 0);\n    // }\n  }\n\n  approveRequest(group, userRequest) {\n    console.log(group);\n    console.log(userRequest);\n    if (group.userRequests.includes(userRequest)) {\n      group.members.push(userRequest);\n      group.userRequests.splice(group.userRequests.indexOf(userRequest), 1);\n    }\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n    //console.log(group);\n  }\n\n  approveAdminRequest(group, adminRequest) {\n    console.log(group);\n    console.log(adminRequest);\n    if (group.adminRequests.includes(adminRequest)) {\n      group.groupAdmins.push(adminRequest);\n      group.adminRequests.splice(group.adminRequests.indexOf(adminRequest), 1);\n    }\n    console.log(group);\n    this.http.post(BACKEND_URL + \"/update-groups\", group).subscribe(response => {\n      console.log('User details updated on the server.', response);\n      //refesh User list \n      this.getGroups();\n    }, error => {\n      console.error('There was an error updating the user details on the server.', error);\n      alert('Error updating profile. Please try again.');\n    });\n  }\n};\nGroupsComponent = __decorate([Component({\n  selector: 'app-groups',\n  templateUrl: './groups.component.html',\n  styleUrls: ['./groups.component.css']\n})], GroupsComponent);","map":{"version":3,"names":["Component","HttpHeaders","Group","httpOptions","headers","BACKEND_URL","GroupsComponent","constructor","http","router","groupChannels","isUniqueGroup","isUser","isAdmin","isSuperAdmin","noRequests","numberOfRequests","numberOfAdminRequests","isButtonDisabled","buttonDisabledStates","group","ngOnInit","storedUser","window","sessionStorage","getItem","loggedInUser","JSON","parse","console","log","username","role","getGroups","getUsers","get","subscribe","groupsNames","allGroupNames","onGroupCardClick","selectedGroup","navigate","queryParams","yourKey","stringify","requestButton","userRequests","push","post","response","error","alert","groupID","editGroupUsers","users","groups","userNotinGroup","usersInGroup","usernames","filter","members","includes","$","modal","addUserFromGroup","removeUserFromGroup","index","indexOf","splice","onAddGroup","onGroupInput","newGroupName","addChannel","newChannelName","leaveGroup","member","channelName","channels","saveGroup","GetNewGroupID","channelsObject","forEach","channel","newGroupID","groupName","createdBy","groupAdmins","valid","closeModal","modalType","adminRequests","data","u","map","myGroups","joinedGroups","otherGroups","groupsNeedApproval","length","groupsAdminNeedApproval","showRequests","requestAdminButton","deleteGroup","showAdminRequests","approveRequest","userRequest","approveAdminRequest","adminRequest","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/frazerlinscott/Desktop/Software Frameworks/Assignments/Assignment1_SoftwareFrames_s2930588/src/app/groups/groups.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n//import { UserDataService } from 'src/app/service/user-data.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Group } from 'server/routes/groupModel';\nimport { ChangeDetectorRef } from '@angular/core';\n\ndeclare var $: any;\n\nconst httpOptions = {\n  headers: new HttpHeaders({ 'Content-Type': 'application/json' })\n};\n\nconst BACKEND_URL = \"http://localhost:3000\";\n\n@Component({\n  selector: 'app-groups',\n  templateUrl: './groups.component.html',\n  styleUrls: ['./groups.component.css']\n})\nexport class GroupsComponent implements OnInit {\n\n  loggedInUser : any;\n  users: any;\n  groups: any;\n  allGroups: any;\n\n  groupsNeedApproval: any;\n  groupsAdminNeedApproval:any;\n\n  selectedGroup: any;\n\n  newGroupName: any;\n  newChannelName: any;\n  groupChannels: string[] = [];\n\n  newGroupID: any;\n  allGroupNames: any;\n  isUniqueGroup:boolean = true;\n\n  isUser: boolean = true;\n  isAdmin: boolean = true;\n  isSuperAdmin: boolean = true;\n\n  noRequests: boolean = true;\n\n  numberOfRequests: number = 0;\n  numberOfAdminRequests: number = 0;\n\n  isButtonDisabled: boolean = false;\n  buttonDisabledStates: { [groupId: string]: boolean } = {};\n\n  myGroups: any;\n  joinedGroups: any;\n  otherGroups: any;\n\n  userNotinGroup: any;\n  usersInGroup: any;\n\n  usernames: any;\n  \n  group: Group = new Group(0, \" \", \" \",[], [], [], [], {}, true);\n\n  constructor(private http: HttpClient, private router: Router) { }\n\n  ngOnInit(): void {\n\n    const storedUser = window.sessionStorage.getItem('current.user');\n    if (storedUser) {\n\n      this.loggedInUser = JSON.parse(storedUser);\n      console.log(this.loggedInUser.username)\n    }\n\n\n  if (this.loggedInUser.role === 1){\n    this.isUser = true\n    this.isAdmin = false\n    this.isSuperAdmin = false\n  }else if (this.loggedInUser.role === 2){\n    this.isUser = false\n    this.isAdmin = true\n    this.isSuperAdmin = false\n  }else if (this.loggedInUser.role === 3){\n    this.isUser = false\n    this.isAdmin = false\n    this.isSuperAdmin = true\n  }\n\n    \n    this.getGroups()\n    this.getUsers()\n    \n\n    this.http.get<string[]>(BACKEND_URL + \"/groups\").subscribe(groupsNames => {\n      this.allGroupNames = groupsNames;\n\n    });\n  }\n\n  onGroupCardClick(group:any ){\n    this.selectedGroup = group;\n    console.log(\"card clicked\")\n    //.log(group)\n    //this.router.navigate(['/channels', group]);\n\n    this.router.navigate(['/channels'], { queryParams: { yourKey: JSON.stringify(group) }})\n  }\n\n  requestButton(group:any){\n    \n    console.log(this.loggedInUser.username)\n\n    group.userRequests.push(this.loggedInUser.username);\n\n    console.log(group)\n\n    this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n      response => {\n          console.log('User details updated on the server.', response);\n\n          //refesh User list \n          this.getGroups();\n      },\n      error => {\n          console.error('There was an error updating the user details on the server.', error);\n          alert('Error updating profile. Please try again.');\n      }\n    )\n    this.buttonDisabledStates[group.groupID] = true;\n  }\n\n  editGroupUsers(group:any){\n    this.selectedGroup = group;\n    console.log(group)\n    console.log(this.users)\n    console.log(this.groups)\n\n    this.userNotinGroup\n    this.usersInGroup\n    // Get all usernames\n    // Filter usernames that are in group.members\n    this.usersInGroup = this.usernames.filter((username: any) => group.members.includes(username));\n    // Filter usernames that are not in group.members\n    this.userNotinGroup = this.usernames.filter((username: any) => !group.members.includes(username));\n    $('#editGroupUsers').modal('show');\n  }\n\n  addUserFromGroup(group:any, username:any){\n    console.log(\"add \" + username + \" from\" + group)\n    console.log(group)\n\n    group.members.push(username);\n\n    this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n      response => {\n          console.log('User details updated on the server.', response);\n\n          //refesh User list \n          this.getGroups();\n          this.getUsers();\n          this.editGroupUsers(group)\n      },\n      error => {\n          console.error('There was an error updating the user details on the server.', error);\n          alert('Error updating profile. Please try again.');\n      }\n    )\n  }\n\n  removeUserFromGroup(group:any, username:any){\n    const index = group.members.indexOf(username);\n    group.members.splice(index, 1)\n\n    this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n      response => {\n          console.log('User details updated on the server.', response);\n\n          //refesh User list \n          this.getGroups();\n          this.getUsers();\n          this.editGroupUsers(group)\n      },\n      error => {\n          console.error('There was an error updating the user details on the server.', error);\n          alert('Error updating profile. Please try again.');\n      }\n    )\n  }\n\n  onAddGroup() {\n    console.log(\"Add Group button clicked\");\n    $('#addGroupModal').modal('show');\n  }\n\n  onGroupInput() {\n    this.isUniqueGroup = !this.allGroupNames.includes(this.newGroupName);\n    console.log(this.isUniqueGroup)\n  }\n\n  addChannel() {\n    if (this.newChannelName && !this.groupChannels.includes(this.newChannelName)) {\n      this.groupChannels.push(this.newChannelName);\n      this.newChannelName = '';\n    }\n  }\n\n  leaveGroup(group:any){\n    console.log(group)\n    console.log(this.loggedInUser.username)\n  \n      // Remove user from group.members\n      group.members = group.members.filter((member: any) => member !== this.loggedInUser.username);\n  \n      // Loop through each channel in group.channels and remove the user\n      for (const channelName in group.channels) {\n          group.channels[channelName] = group.channels[channelName].filter((member: any) => member !== this.loggedInUser.username);\n      }\n      this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n        response => {\n  \n            //refesh User list \n            this.getGroups();\n        },\n        error => {\n            console.error('There was an error updating the user details on the server.', error);\n            alert('Error updating profile. Please try again.');\n        }\n      )\n  }\n\n  saveGroup(){\n    //console.log(this.newGroupName)\n   // console.log(this.groupChannels)\n\n    this.GetNewGroupID()\n\n    //console.log(this.newGroupID)\n\n    let channelsObject: { [channelName: string]: string[] } = {};\n      this.groupChannels.forEach(channel => {\n        channelsObject[channel] = [];\n      });\n\n    if (this.isUniqueGroup === true){\n      this.group.groupID = this.newGroupID;\n      this.group.groupName = this.newGroupName;\n      this.group.createdBy = this.loggedInUser.username;\n      this.group.groupAdmins = [this.loggedInUser.username];\n      this.group.userRequests = [];\n      this.group.members = [this.loggedInUser.username];\n      this.group.channels = channelsObject;\n      this.group.valid = true;\n  \n      //console.log(this.group)\n  \n      this.http.post(BACKEND_URL+\"/update-groups\", this.group).subscribe(\n        response => {\n            console.log('User details updated on the server.', response);\n  \n            //refesh User list \n            this.getGroups();\n        },\n        error => {\n            console.error('There was an error updating the user details on the server.', error);\n            alert('Error updating profile. Please try again.');\n        }\n      )\n      this.closeModal(\"newGroup\")\n    }else{\n      alert(\"Group already exists\");\n    }\n  }\n\n  closeModal(modalType: string | undefined){\n\n    if(modalType == \"newGroup\"){\n\n      this.group = {\n        groupID: 0,\n        groupName: \"\",\n        createdBy: this.loggedInUser.username,\n        adminRequests:[],\n        groupAdmins: [],\n        userRequests: [],\n        members: [],\n        channels: {},\n        valid: true\n    };\n  \n    this.newGroupName=''\n  \n    this.groupChannels=[]\n  \n    //console.log(this.group)\n      $('#addGroupModal').modal('hide');\n    }\n\n    if(modalType == \"requestApproval\"){\n      $('#approveRequests').modal('hide');\n    } \n\n    if(modalType == \"requestAdminApproval\"){\n      $('#approveAdminRequests').modal('hide');\n    } \n\n    if(modalType == \"editUsers\"){\n      $('#editGroupUsers').modal('hide');\n    } \n\n  }\n\n  getUsers(){\n    this.http.post(BACKEND_URL + \"/all-users\", httpOptions)\n    .subscribe(\n        (data: any) => {\n            if (data) {\n              this.users = data\n              //console.log(this.users)\n              this.usernames = this.users.filter((u: { valid: any; }) => u.valid).map((u: { username: any; }) => u.username);\n              console.log(this.usernames);\n\n            } else {\n                alert(\"no Data Soz\");\n            }\n        },\n        error => {console.error('There was an error:', error);}\n    );\n  }\n\n  getGroups(){\n    this.http.post(BACKEND_URL + \"/all-groups\", httpOptions)\n    .subscribe(\n        (data: any) => {\n            if (data) {\n\n\n              this.groups = data.filter((group: { valid: boolean; }) => group.valid === true);\n              \n              // Groups created by loggedInUser\n              this.myGroups = this.groups.filter((group: { createdBy: any; groupAdmins: any;}) => group.createdBy === this.loggedInUser.username || group.groupAdmins.includes(this.loggedInUser.username));\n\n              // Groups that loggedInUser is a member of but not created by them\n              this.joinedGroups = this.groups.filter((group: { members: string | any[]; createdBy: any; groupAdmins: any; }) => \n                  group.members.includes(this.loggedInUser.username) && group.createdBy !== this.loggedInUser.username && !group.groupAdmins.includes(this.loggedInUser.username));\n\n              // Groups that loggedInUser has neither created nor joined\n              this.otherGroups = this.groups.filter((group: { createdBy: any; members: string | any[]; }) => \n                  group.createdBy !== this.loggedInUser.username && !group.members.includes(this.loggedInUser.username));\n\n\n              // console.log(this.loggedInUser)\n              // console.log(this.myGroups)\n              // console.log(this.otherGroups)\n\n\n              //if groupAdmin role filter requests to administered groups -- if superAdmin show all requests\n              if(this.loggedInUser.role == 2){\n                this.groupsNeedApproval = this.groups.filter(\n                  (group: { userRequests: any[]; groupAdmins: string[]; }) => group.userRequests && group.userRequests.length > 0 && group.groupAdmins.includes(this.loggedInUser.username));\n                this.numberOfRequests = this.groupsNeedApproval.length;\n              } else if(this.loggedInUser.role == 3){\n                this.groupsNeedApproval = this.groups.filter((group: { userRequests: string | any[]; }) => group.userRequests && group.userRequests.length > 0);\n                this.numberOfRequests=this.groupsNeedApproval.length\n                this.groupsAdminNeedApproval = this.groups.filter((group: { adminRequests: string | any[]; }) => group.adminRequests && group.adminRequests.length > 0);\n                this.numberOfAdminRequests=this.groupsAdminNeedApproval.length \n              }\n\n              //console.log(this.numberOfRequests)\n\n              //this.allGroups = data\n              //console.log(this.groups)\n\n              //console.log(typeof(this.groups))\n            } else {\n                alert(\"no Data Soz\");\n            }\n        },\n        error => {console.error('There was an error:', error);}\n    );\n  }\n\n  GetNewGroupID(){\n    if (this.groups && this.groups.length > 0) {\n      this.newGroupID = this.groups[this.groups.length - 1].groupID + 1;\n  } else {\n      this.newGroupID = 1;\n  }\n  }\n\n  showRequests(){\n    this.getGroups();  // Assuming this method populates the 'this.groups' array\n    // this.getRequests()\n\n    $('#approveRequests').modal('show');\n\n    if(this.groups.length > 0){\n      //this.noRequests=false\n      this.groupsNeedApproval = this.groups.filter((group: { userRequests: string | any[]; }) => group.userRequests && group.userRequests.length > 0);\n    }\n  }\n\n  requestAdminButton(group:any){\n        \n        //console.log(this.loggedInUser.username)\n\n        group.adminRequests.push(this.loggedInUser.username);\n\n\n        this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n          response => {\n              console.log('User details updated on the server.', response);\n\n              //refesh User list \n              this.getGroups();\n          },\n          error => {\n              console.error('There was an error updating the user details on the server.', error);\n              alert('Error updating profile. Please try again.');\n          }\n        )\n        this.buttonDisabledStates[group.groupID] = true;\n  }\n\n  deleteGroup(group:any){\n\n    console.log(group)\n\n    group.valid = false\n\n    this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n      response => {\n          console.log('User details updated on the server.', response);\n\n          //refesh User list \n          this.getGroups();\n      },\n      error => {\n          console.error('There was an error updating the user details on the server.', error);\n          alert('Error updating profile. Please try again.');\n      }\n    )\n  }\n\n  showAdminRequests(){\n    this.getGroups();  // Assuming this method populates the 'this.groups' array\n    // this.getRequests()\n\n    $('#approveAdminRequests').modal('show');\n\n    console.log(this.groups)\n\n    // if(this.groups.length > 0){\n    //   //this.noRequests=false\n    //   this.groupsAdminNeedApproval = this.groups.filter((group: { adminRequests: string | any[]; }) => group.adminRequests && group.adminRequests.length > 0);\n    // }\n  }\n\n  approveRequest(group: any, userRequest: string){\n    console.log(group);\n    console.log(userRequest);\n\n    if (group.userRequests.includes(userRequest)) {\n      group.members.push(userRequest);\n      group.userRequests.splice(group.userRequests.indexOf(userRequest), 1);\n  }\n\n  this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n    response => {\n        console.log('User details updated on the server.', response);\n\n        //refesh User list \n        this.getGroups();\n    },\n    error => {\n        console.error('There was an error updating the user details on the server.', error);\n        alert('Error updating profile. Please try again.');\n    }\n  )\n\n  //console.log(group);\n  }\n\n  approveAdminRequest(group: any, adminRequest: string){\n  console.log(group);\n  console.log(adminRequest);\n\n  if (group.adminRequests.includes(adminRequest)) {\n    group.groupAdmins.push(adminRequest);\n    group.adminRequests.splice(group.adminRequests.indexOf(adminRequest), 1);\n  }\n  console.log(group);\n\n  this.http.post(BACKEND_URL+\"/update-groups\", group).subscribe(\n    response => {\n        console.log('User details updated on the server.', response);\n\n        //refesh User list \n        this.getGroups();\n    },\n    error => {\n        console.error('There was an error updating the user details on the server.', error);\n        alert('Error updating profile. Please try again.');\n    }\n  )\n  }\n\n\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}