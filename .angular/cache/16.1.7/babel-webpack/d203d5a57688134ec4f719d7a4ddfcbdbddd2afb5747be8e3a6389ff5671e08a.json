{"ast":null,"code":"// import { ComponentFixture, TestBed } from '@angular/core/testing';\n// import { GroupsComponent } from './groups.component';\n// describe('GroupsComponent', () => {\n//   let component: GroupsComponent;\n//   let fixture: ComponentFixture<GroupsComponent>;\n//   beforeEach(() => {\n//     TestBed.configureTestingModule({\n//       declarations: [GroupsComponent]\n//     });\n//     fixture = TestBed.createComponent(GroupsComponent);\n//     component = fixture.componentInstance;\n//     fixture.detectChanges();\n//   });\n//   it('should create', () => {\n//     expect(component).toBeTruthy();\n//   });\n// });\nimport { TestBed, async } from '@angular/core/testing';\nimport { GroupsComponent } from './groups.component';\nimport { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';\nimport { RouterTestingModule } from '@angular/router/testing';\nconst BACKEND_URL = \"http://localhost:3000\";\ndescribe('GroupsComponent', () => {\n  let component;\n  let fixture;\n  let httpMock;\n  const mockAuthService = {\n    currentUser: {\n      role: 'admin' // or any dummy role you need\n    }\n  };\n\n  beforeEach(async(() => {\n    TestBed.configureTestingModule({\n      imports: [HttpClientTestingModule, RouterTestingModule],\n      declarations: [GroupsComponent],\n      providers: [{\n        provide: 'AuthService',\n        useValue: mockAuthService\n      }]\n    }).compileComponents();\n    fixture = TestBed.createComponent(GroupsComponent);\n    component = fixture.componentInstance;\n    httpMock = TestBed.inject(HttpTestingController);\n    fixture.detectChanges();\n    component.authService.currentUser = {\n      role: 'admin'\n    };\n  }));\n  it('should remove a user from a group and its channels', () => {\n    const mockGroup = {\n      members: ['user1', 'user2'],\n      channels: {\n        channel1: ['user1', 'user2'],\n        channel2: ['user1']\n      }\n    };\n    component.loggedInUser = {\n      username: 'user1'\n    };\n    component.leaveGroup(mockGroup);\n    const req = httpMock.expectOne(`${BACKEND_URL}/update-groups`);\n    expect(req.request.method).toBe('POST');\n    req.flush({}); // mock a successful response\n    expect(mockGroup.members).toEqual(['user2']);\n    expect(mockGroup.channels.channel1).toEqual(['user2']);\n    expect(mockGroup.channels.channel2).toEqual([]);\n  });\n  it('should remove a user from a group and its channels', () => {\n    const mockGroup = {\n      members: ['user1', 'user2'],\n      channels: {\n        channel1: ['user1', 'user2'],\n        channel2: ['user1']\n      }\n    };\n    component.loggedInUser = {\n      username: 'user1'\n    };\n    component.leaveGroup(mockGroup);\n    const req = httpMock.expectOne(`${BACKEND_URL}/update-groups`); // assuming BACKEND_URL is imported\n    expect(req.request.method).toBe('POST');\n    req.flush({}); // mock a successful response\n    expect(mockGroup.members).toEqual(['user2']);\n    expect(mockGroup.channels['channel1']).toEqual(['user2']);\n    expect(mockGroup.channels['channel2']).toEqual([]);\n  });\n  it('should save a group if it is unique', () => {\n    component.isUniqueGroup = true;\n    component.loggedInUser = {\n      username: 'user1'\n    };\n    component.newGroupName = 'TestGroup';\n    component.groupChannels = ['channel1', 'channel2'];\n    component.newGroupID = '1234';\n    component.saveGroup();\n    const req = httpMock.expectOne(`${BACKEND_URL}/update-groups`); // assuming BACKEND_URL is imported\n    expect(req.request.method).toBe('POST');\n    req.flush({}); // mock a successful response\n    expect(component.group.groupName).toEqual('TestGroup');\n    expect(component.group.members).toEqual(['user1']);\n    expect(component.group.channels['channel1']).toEqual([]);\n    expect(component.group.channels['channel2']).toEqual([]);\n  });\n  it('should not save a group if it is not unique', () => {\n    component.isUniqueGroup = false;\n    component.saveGroup();\n    const reqs = httpMock.match(`${BACKEND_URL}/update-groups`);\n    expect(reqs.length).toBe(0); // Expect no HTTP requests to be made\n  });\n\n  afterEach(() => {\n    httpMock.verify(); // Ensure that no requests are outstanding\n  });\n});","map":{"version":3,"names":["TestBed","async","GroupsComponent","HttpClientTestingModule","HttpTestingController","RouterTestingModule","BACKEND_URL","describe","component","fixture","httpMock","mockAuthService","currentUser","role","beforeEach","configureTestingModule","imports","declarations","providers","provide","useValue","compileComponents","createComponent","componentInstance","inject","detectChanges","authService","it","mockGroup","members","channels","channel1","channel2","loggedInUser","username","leaveGroup","req","expectOne","expect","request","method","toBe","flush","toEqual","isUniqueGroup","newGroupName","groupChannels","newGroupID","saveGroup","group","groupName","reqs","match","length","afterEach","verify"],"sources":["/Users/frazerlinscott/Desktop/Software Frameworks/Assignments/Assignment1_SoftwareFrames_s2930588/src/app/groups/groups.component.spec.ts"],"sourcesContent":["// import { ComponentFixture, TestBed } from '@angular/core/testing';\n\n// import { GroupsComponent } from './groups.component';\n\n// describe('GroupsComponent', () => {\n//   let component: GroupsComponent;\n//   let fixture: ComponentFixture<GroupsComponent>;\n\n//   beforeEach(() => {\n//     TestBed.configureTestingModule({\n//       declarations: [GroupsComponent]\n//     });\n//     fixture = TestBed.createComponent(GroupsComponent);\n//     component = fixture.componentInstance;\n//     fixture.detectChanges();\n//   });\n\n//   it('should create', () => {\n//     expect(component).toBeTruthy();\n//   });\n// });\n\n\nimport { TestBed, ComponentFixture, async } from '@angular/core/testing';\nimport { GroupsComponent } from './groups.component';\nimport { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';\nimport { RouterTestingModule } from '@angular/router/testing';\n\nconst BACKEND_URL = \"http://localhost:3000\";\n\ndescribe('GroupsComponent', () => {\n    let component: GroupsComponent;\n    let fixture: ComponentFixture<GroupsComponent>;\n    let httpMock: HttpTestingController;\n\n    const mockAuthService = {\n        currentUser: {\n            role: 'admin'  // or any dummy role you need\n        }\n    };\n\n    beforeEach(async(() => {\n        TestBed.configureTestingModule({\n            imports: [HttpClientTestingModule, RouterTestingModule],\n            declarations: [GroupsComponent],\n            providers: [ // Add this line to provide the mockAuthService\n                { provide: 'AuthService', useValue: mockAuthService }\n            ]\n        }).compileComponents();\n\n        fixture = TestBed.createComponent(GroupsComponent);\n        component = fixture.componentInstance;\n        httpMock = TestBed.inject(HttpTestingController);\n        fixture.detectChanges();\n        component.authService.currentUser = { role: 'admin' };\n    }));\n\n    it('should remove a user from a group and its channels', () => {\n        const mockGroup = {\n            members: ['user1', 'user2'],\n            channels: {\n                channel1: ['user1', 'user2'],\n                channel2: ['user1']\n            }\n        };\n\n        component.loggedInUser = { username: 'user1' };\n\n        component.leaveGroup(mockGroup);\n\n        const req = httpMock.expectOne(`${BACKEND_URL}/update-groups`);\n        expect(req.request.method).toBe('POST');\n        req.flush({}); // mock a successful response\n\n        expect(mockGroup.members).toEqual(['user2']);\n        expect(mockGroup.channels.channel1).toEqual(['user2']);\n        expect(mockGroup.channels.channel2).toEqual([]);\n    });\n\n    it('should remove a user from a group and its channels', () => {\n      const mockGroup = {\n          members: ['user1', 'user2'],\n          channels: {\n              channel1: ['user1', 'user2'],\n              channel2: ['user1']\n          }\n      };\n\n      component.loggedInUser = { username: 'user1' };\n\n      component.leaveGroup(mockGroup);\n\n      const req = httpMock.expectOne(`${BACKEND_URL}/update-groups`); // assuming BACKEND_URL is imported\n      expect(req.request.method).toBe('POST');\n      req.flush({}); // mock a successful response\n\n      expect(mockGroup.members).toEqual(['user2']);\n      expect(mockGroup.channels['channel1']).toEqual(['user2']);\n      expect(mockGroup.channels['channel2']).toEqual([]);\n  });\n\n  it('should save a group if it is unique', () => {\n      component.isUniqueGroup = true;\n      component.loggedInUser = { username: 'user1' };\n      component.newGroupName = 'TestGroup';\n      component.groupChannels = ['channel1', 'channel2'];\n      component.newGroupID = '1234';\n      \n      component.saveGroup();\n\n      const req = httpMock.expectOne(`${BACKEND_URL}/update-groups`); // assuming BACKEND_URL is imported\n      expect(req.request.method).toBe('POST');\n      req.flush({}); // mock a successful response\n\n      expect(component.group.groupName).toEqual('TestGroup');\n      expect(component.group.members).toEqual(['user1']);\n      expect(component.group.channels['channel1']).toEqual([]);\n      expect(component.group.channels['channel2']).toEqual([]);\n  });\n\n  it('should not save a group if it is not unique', () => {\n      component.isUniqueGroup = false;\n      component.saveGroup();\n      \n      const reqs = httpMock.match(`${BACKEND_URL}/update-groups`);\n      expect(reqs.length).toBe(0); // Expect no HTTP requests to be made\n  });\n\n  afterEach(() => {\n    httpMock.verify(); // Ensure that no requests are outstanding\n});\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}