{"ast":null,"code":"import { TestBed } from '@angular/core/testing';\nimport { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';\nimport { FormsModule } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { of } from 'rxjs';\nimport { ChatComponent } from './chat.component';\nimport { UploadService } from '../service/upload.service';\nimport { throwError } from 'rxjs';\ndescribe('ChatComponent', () => {\n  let component;\n  let fixture;\n  let uploadService;\n  let httpMock;\n  const mockResponse = {\n    attachmentId: '12345',\n    message: 'File uploaded successfully'\n  };\n  beforeEach(() => {\n    TestBed.configureTestingModule({\n      declarations: [ChatComponent],\n      imports: [HttpClientTestingModule, FormsModule],\n      providers: [{\n        provide: ActivatedRoute,\n        useValue: {\n          paramMap: of({\n            get: id => '1'\n          })\n        }\n      }, UploadService]\n    });\n    fixture = TestBed.createComponent(ChatComponent);\n    component = fixture.componentInstance;\n    uploadService = TestBed.inject(UploadService);\n    httpMock = TestBed.inject(HttpTestingController);\n    fixture.detectChanges();\n  });\n  afterEach(() => {\n    httpMock.verify();\n  });\n  it('should create', () => {\n    expect(component).toBeTruthy();\n  });\n  it('should call uploadAttachment and handle success', () => {\n    const formData = new FormData();\n    const mockResponse = {\n      message: 'Upload successful'\n    }; // Replace with your mock response data\n    spyOn(uploadService, 'uploadAttachment').and.returnValue(of(mockResponse));\n    component.uploadAttachment();\n    expect(uploadService.uploadAttachment).toHaveBeenCalled();\n    httpMock.expectOne(\"http://localhost:3000\" + '/attachPhoto').flush(mockResponse);\n    // Add your expectations for the component's behavior here\n  });\n\n  it('should handle uploadAttachment error', () => {\n    const formData = new FormData();\n    const mockError = {\n      status: 500,\n      statusText: 'Internal Server Error'\n    }; // Replace with your mock error data\n    spyOn(uploadService, 'uploadAttachment').and.returnValue(throwError(mockError) // Use throwError to create an observable that emits an error\n    );\n\n    component.uploadAttachment();\n    expect(uploadService.uploadAttachment).toHaveBeenCalled();\n    // Add your expectations for how the component handles the error here\n  });\n});","map":{"version":3,"names":["TestBed","HttpClientTestingModule","HttpTestingController","FormsModule","ActivatedRoute","of","ChatComponent","UploadService","throwError","describe","component","fixture","uploadService","httpMock","mockResponse","attachmentId","message","beforeEach","configureTestingModule","declarations","imports","providers","provide","useValue","paramMap","get","id","createComponent","componentInstance","inject","detectChanges","afterEach","verify","it","expect","toBeTruthy","formData","FormData","spyOn","and","returnValue","uploadAttachment","toHaveBeenCalled","expectOne","flush","mockError","status","statusText"],"sources":["/Users/frazerlinscott/Desktop/Software Frameworks/Assignments/Assignment1_SoftwareFrames_s2930588/src/app/chat/chat.component.spec.ts"],"sourcesContent":["import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';\nimport { FormsModule } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { of } from 'rxjs';\nimport { ChatComponent } from './chat.component';\nimport { UploadService } from '../service/upload.service';\nimport { throwError } from 'rxjs';\nimport { UploadResponse } from 'server/models/interfaces';\n\n\n\ndescribe('ChatComponent', () => {\n  let component: ChatComponent;\n  let fixture: ComponentFixture<ChatComponent>;\n  let uploadService: UploadService;\n  let httpMock: HttpTestingController;\n\n  const mockResponse: UploadResponse = {\n    attachmentId: '12345', // Add a valid attachmentId\n    message: 'File uploaded successfully',\n  };\n\n\n  beforeEach(() => {\n    TestBed.configureTestingModule({\n      declarations: [ChatComponent],\n      imports: [HttpClientTestingModule, FormsModule],\n      providers: [\n        {\n          provide: ActivatedRoute,\n          useValue: { paramMap: of({ get: (id: string) => '1' }) }\n        },\n        UploadService\n      ]\n    });\n\n    fixture = TestBed.createComponent(ChatComponent);\n    component = fixture.componentInstance;\n    uploadService = TestBed.inject(UploadService);\n    httpMock = TestBed.inject(HttpTestingController);\n\n    fixture.detectChanges();\n  });\n\n  afterEach(() => {\n    httpMock.verify();\n  });\n\n  it('should create', () => {\n    expect(component).toBeTruthy();\n  });\n\n  it('should call uploadAttachment and handle success', () => {\n    const formData = new FormData();\n    const mockResponse = { message: 'Upload successful' }; // Replace with your mock response data\n\n    spyOn(uploadService, 'uploadAttachment').and.returnValue(of(mockResponse));\n\n    component.uploadAttachment();\n\n    expect(uploadService.uploadAttachment).toHaveBeenCalled();\n\n    httpMock.expectOne(\"http://localhost:3000\" + '/attachPhoto').flush(mockResponse);\n\n    // Add your expectations for the component's behavior here\n  });\n\n  it('should handle uploadAttachment error', () => {\n    const formData = new FormData();\n    const mockError = { status: 500, statusText: 'Internal Server Error' }; // Replace with your mock error data\n  \n    spyOn(uploadService, 'uploadAttachment').and.returnValue(\n      throwError(mockError) // Use throwError to create an observable that emits an error\n    );\n  \n    component.uploadAttachment();\n  \n    expect(uploadService.uploadAttachment).toHaveBeenCalled();\n\n    // Add your expectations for how the component handles the error here\n  });\n});\n"],"mappings":"AAAA,SAA2BA,OAAO,QAAQ,uBAAuB;AACjE,SAASC,uBAAuB,EAAEC,qBAAqB,QAAQ,8BAA8B;AAC7F,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,cAAc,QAAQ,iBAAiB;AAChD,SAASC,EAAE,QAAQ,MAAM;AACzB,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SAASC,aAAa,QAAQ,2BAA2B;AACzD,SAASC,UAAU,QAAQ,MAAM;AAKjCC,QAAQ,CAAC,eAAe,EAAE,MAAK;EAC7B,IAAIC,SAAwB;EAC5B,IAAIC,OAAwC;EAC5C,IAAIC,aAA4B;EAChC,IAAIC,QAA+B;EAEnC,MAAMC,YAAY,GAAmB;IACnCC,YAAY,EAAE,OAAO;IACrBC,OAAO,EAAE;GACV;EAGDC,UAAU,CAAC,MAAK;IACdjB,OAAO,CAACkB,sBAAsB,CAAC;MAC7BC,YAAY,EAAE,CAACb,aAAa,CAAC;MAC7Bc,OAAO,EAAE,CAACnB,uBAAuB,EAAEE,WAAW,CAAC;MAC/CkB,SAAS,EAAE,CACT;QACEC,OAAO,EAAElB,cAAc;QACvBmB,QAAQ,EAAE;UAAEC,QAAQ,EAAEnB,EAAE,CAAC;YAAEoB,GAAG,EAAGC,EAAU,IAAK;UAAG,CAAE;QAAC;OACvD,EACDnB,aAAa;KAEhB,CAAC;IAEFI,OAAO,GAAGX,OAAO,CAAC2B,eAAe,CAACrB,aAAa,CAAC;IAChDI,SAAS,GAAGC,OAAO,CAACiB,iBAAiB;IACrChB,aAAa,GAAGZ,OAAO,CAAC6B,MAAM,CAACtB,aAAa,CAAC;IAC7CM,QAAQ,GAAGb,OAAO,CAAC6B,MAAM,CAAC3B,qBAAqB,CAAC;IAEhDS,OAAO,CAACmB,aAAa,EAAE;EACzB,CAAC,CAAC;EAEFC,SAAS,CAAC,MAAK;IACblB,QAAQ,CAACmB,MAAM,EAAE;EACnB,CAAC,CAAC;EAEFC,EAAE,CAAC,eAAe,EAAE,MAAK;IACvBC,MAAM,CAACxB,SAAS,CAAC,CAACyB,UAAU,EAAE;EAChC,CAAC,CAAC;EAEFF,EAAE,CAAC,iDAAiD,EAAE,MAAK;IACzD,MAAMG,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/B,MAAMvB,YAAY,GAAG;MAAEE,OAAO,EAAE;IAAmB,CAAE,CAAC,CAAC;IAEvDsB,KAAK,CAAC1B,aAAa,EAAE,kBAAkB,CAAC,CAAC2B,GAAG,CAACC,WAAW,CAACnC,EAAE,CAACS,YAAY,CAAC,CAAC;IAE1EJ,SAAS,CAAC+B,gBAAgB,EAAE;IAE5BP,MAAM,CAACtB,aAAa,CAAC6B,gBAAgB,CAAC,CAACC,gBAAgB,EAAE;IAEzD7B,QAAQ,CAAC8B,SAAS,CAAC,uBAAuB,GAAG,cAAc,CAAC,CAACC,KAAK,CAAC9B,YAAY,CAAC;IAEhF;EACF,CAAC,CAAC;;EAEFmB,EAAE,CAAC,sCAAsC,EAAE,MAAK;IAC9C,MAAMG,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/B,MAAMQ,SAAS,GAAG;MAAEC,MAAM,EAAE,GAAG;MAAEC,UAAU,EAAE;IAAuB,CAAE,CAAC,CAAC;IAExET,KAAK,CAAC1B,aAAa,EAAE,kBAAkB,CAAC,CAAC2B,GAAG,CAACC,WAAW,CACtDhC,UAAU,CAACqC,SAAS,CAAC,CAAC;KACvB;;IAEDnC,SAAS,CAAC+B,gBAAgB,EAAE;IAE5BP,MAAM,CAACtB,aAAa,CAAC6B,gBAAgB,CAAC,CAACC,gBAAgB,EAAE;IAEzD;EACF,CAAC,CAAC;AACJ,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}